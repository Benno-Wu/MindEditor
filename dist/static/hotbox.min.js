/*! For license information please see hotbox.min.js.LICENSE.txt */
!function(){var e={r:function(t){if(e[t].inited)return e[t].value;if("function"!=typeof e[t].value)return e[t].inited=!0,e[t].value;var n={exports:{}},i=e[t].value(null,n.exports,n);if(e[t].inited=!0,e[t].value=i,void 0!==i)return i;for(var o in n.exports)if(n.exports.hasOwnProperty(o))return e[t].inited=!0,e[t].value=n.exports,n.exports}};e[0]={value:function(t,n,i){i.exports=window.HotBox=e.r(1)}},e[1]={value:function(t,n,i){function o(e){return document.createElement(e)}function r(e,t){e.classList.add(t)}function a(e,t){e.classList.remove(t)}function s(e,t){e.appendChild(t)}function c(e,t){return"object"!=typeof t&&(t=[].slice.apply(arguments,1)),String(e).replace(/\{(\w+)\}/g,(function(e,n){return t[n]||e}))}function u(e){function t(e,t){if(y.position=t,e==h)u!=h&&(d.shift().deactive(),d=[]),u=h;else if("back"==e)u!=h&&(u.deactive(),d.shift(),(u=d[0])?u.active():u="idle");else{u!=h&&u.deactive();var n=a[e];d.unshift(n),"function"==typeof y.position&&(t=y.position(t)),n.active(t),u=n}}if("string"==typeof e&&(e=document.querySelector(e)),!(e&&e instanceof HTMLElement))throw new Error("No container or not invalid container for hot box");var n=o(v);r(n,"hotbox"),s(e,n),this.$element=n,this.$container=e,this.isIME=!1,this.browser={sg:/se[\s\S]+metasr/.test(navigator.userAgent.toLowerCase())},this._parentFSM={},this.position={};var i,a={},c=null,u=h,d=[],y=this;this.control=function(e){return i?void i.active():((i=new(e=e||p)(y)).active(),n.onmousedown=function(e){e.stopPropagation(),e.preventDefault()},y)},this.state=function(e){if(!e)return u;if(e==h)throw new Error("Can not define or use the `idle` state.");return a[e]=a[e]||new l(this,e),"main"==e&&(c=a[e]),a[e]},this.active=t,this.dispatch=function(n){var i=n.type.toLowerCase();if(n.keyHash=f.hash(n),n.isKey=function(e){if(!e)return!1;for(var t=e.split(/\s*\|\s*/);t.length;)if(n.keyHash==f.hash(t.shift()))return!0;return!1},n[i]=!0,!(n.keyup&&y.activeKey&&n.isKey(y.activeKey)&&u==h&&c)){var o=u==h?c:u;if(o){var r=o.handleKeyEvent(n);return"function"==typeof y.onkeyevent&&(n.handleResult=r,y.onkeyevent(n,r)),r}return null}t("main",{x:e.clientWidth/2,y:e.clientHeight/2})},this.setParentFSM=function(e){y._parentFSM=e},this.getParentFSM=function(){return y._parentFSM},this.activeKey="space",this.actionKey="space"}function l(e,t){function n(){return!0}function i(e,t){return e('<span class="label">{label}</span><span class="key">{key}</span>',{label:"function"==typeof t.label?t.label():t.label,key:t.key&&t.key.split("|")[0]})}function u(e){$&&$.$button&&a($.$button,d),($=e)&&$.$button&&r($.$button,d)}function l(e){K&&K.$button&&K.$button&&a(K.$button,p),(K=e)&&K.$button&&r(K.$button,p)}function f(t){t&&(t.enable&&!t.enable()||(t.action&&t.action(t),e.active(t.next||h,e.position)),u(null),l(null))}var p="selected",d="pressed",y="active",b=o(v),g=o(v),k=o(v),x=o("div"),m=o(v),w=o(v);r(b,"state"),r(b,t),r(g,"center"),r(k,"ring"),r(x,"ring-shape"),r(m,"top"),r(w,"bottom"),s(e.$element,b),s(b,x),s(b,g),s(b,k),s(b,m),s(b,w),this.name=t;var E={center:null,ring:[],top:[],bottom:[],behind:[]},L=[],K=null,$=null,M=!1,S=!0,F=!1;this.rerender=function(){F=!0},this.button=function(e){var t=function(e){var t=o(v);r(t,"button");var a=e.render||i;switch(t.innerHTML=a(c,e),e.position){case"center":s(g,t);break;case"ring":s(k,t);break;case"top":s(m,t);break;case"bottom":s(w,t)}return{render:e.render,action:e.action,enable:e.enable||n,beforeShow:e.beforeShow,key:e.key,next:e.next,label:e.label,data:e.data||null,$button:t}}(e);"center"==e.position?E.center=t:E[e.position]&&E[e.position].push(t),L.push(t),S=!0},this.active=function(t){(t=t||{x:e.$container.clientWidth/2,y:e.$container.clientHeight/2})&&(b.style.left=t.x+"px",b.style.top=t.y+"px"),L.forEach((function(e){var t=e.$button;if(t&&t.classList[e.enable()?"add":"remove"]("enabled"),F){var n=e.render||i;t.innerHTML=n(c,{label:e.label,key:e.key})}e.beforeShow&&e.beforeShow()})),F=!1,r(b,y),S&&function(){var e=15*E.ring.length;(function(e){var t=E.ring,n=2*Math.PI/t.length;E.center&&(E.center.indexedPosition=[0,0]),x.style.marginLeft=x.style.marginTop=-e+"px",x.style.width=x.style.height=e+e+"px";for(var i,o,r,a,s=0;s<t.length;s++)i=t[s].$button,o=n*s-Math.PI/2,r=e*Math.cos(o),a=e*Math.sin(o),t[s].indexedPosition=[r,a],i.style.left=r+"px",i.style.top=a+"px"})(e),function(e){var t=-m.clientWidth/2,n=2*-e-m.clientHeight/2;m.style.marginLeft=t+"px",m.style.marginTop=n+"px",E.top.forEach((function(e){var i=e.$button;e.indexedPosition=[t+i.offsetLeft+i.clientWidth/2,n]}))}(e),function(e){var t=-w.clientWidth/2,n=2*e-w.clientHeight/2;w.style.marginLeft=t+"px",w.style.marginTop=n+"px",E.bottom.forEach((function(e){var i=e.$button;e.indexedPosition=[t+i.offsetLeft+i.clientWidth/2,n]}))}(e),function(){var e=L.filter((function(e){return e.indexedPosition}));e.forEach((function(t){var n,i,o,r,a,s,c={},u=0,l={},f=t.indexedPosition,p=Math.abs;e.forEach((function(e){if(t!=e)for(n=e.indexedPosition,a=[],i=n[0]-f[0],o=n[1]-f[1],r=Math.sqrt(i*i+o*o),p(i)>2&&(a.push(i>0?"right":"left"),a.push(r+p(o))),p(o)>2&&(a.push(o>0?"down":"up"),a.push(r+p(i)));a.length;)s=a.shift(),u=a.shift(),(!c[s]||u<l[s])&&(c[s]=e,l[s]=u)})),t.neighbor=c}))}(),S=!1}(),K||l(E.center||E.ring[0]||E.top[0]||E.bottom[0]),M=!0},this.deactive=function(){a(b,y),l(null),M=!1},b.onmouseup=function(e){if(!e.button)for(var t=e.target;t&&t!=b;)t.classList.contains("button")&&L.forEach((function(e){e.$button==t&&f(e)})),t=t.parentNode},this.handleKeyEvent=function(n){var i=null;if(e.browser.sg&&n.isKey("esc"))return $?n.isKey($.key)||u(null):e.active("back",e.position),"back";if(n.keydown||e.isIME&&n.keyup){if(L.forEach((function(o){if(o.enable()&&n.isKey(o.key)){if(M||e.hintDeactiveMainState){if(l(o),u(o),i="buttonpress",n.keyup)return f(o),i="execute"}else f(o),i="execute";n.preventDefault(),n.stopPropagation(),!M&&e.hintDeactiveMainState&&e.active(t,e.position)}})),M){if(n.isKey("esc"))return $?n.isKey($.key)||u(null):e.active("back",e.position),"back";["up","down","left","right"].forEach((function(e){if(n.isKey(e)){if(!K)return void l(E.center||E.ring[0]||E.top[0]||E.bottom[0]);for(var t=K.neighbor[e];t&&!t.enable();)t=t.neighbor[e];t&&l(t),i="navigate"}})),n.isKey("space")&&n.keyup?(f(K),n.preventDefault(),n.stopPropagation(),i="execute"):n.isKey("space")&&K?(u(K),i="buttonpress"):$&&$!=K&&(u(null),i="selectcancel")}}else!n.keyup||!M&&e.hintDeactiveMainState||$&&(n.isKey("space")&&K==$||n.isKey($.key))&&(f($),n.preventDefault(),n.stopPropagation(),i="execute");return e.isIME=229==n.keyCode&&n.keydown,i}}var f=e.r(2),p=e.r(3),h=u.STATE_IDLE="idle",v="div";i.exports=u}},e[2]={value:function(t,n,i){function o(e){return"string"==typeof e?function(e){var t=0;return e.toLowerCase().split(/\s*\+\s*/).forEach((function(e){switch(e){case"ctrl":case"cmd":t|=a;break;case"alt":t|=s;break;case"shift":t|=c;break;default:t|=r[e]}})),t}(e):function(e){var t=0;return(e.ctrlKey||e.metaKey)&&(t|=a),e.altKey&&(t|=s),e.shiftKey&&(t|=c),-1==[16,17,18,91].indexOf(e.keyCode)&&(t|=e.keyCode),t}(e)}var r=e.r(4),a=4096,s=8192,c=16384;n.hash=o,n.is=function(e,t){return e&&t&&o(e)==o(t)}}},e[3]={value:function(t,n,i){var o=(e.r(2),"hotbox-focus");i.exports=function(e){function t(t){a&&e.dispatch(t)}function n(){r.select(),r.focus(),a=!0,s.classList.add(o)}function i(){r.blur(),a=!1,s.classList.remove(o)}var r,a=!0,s=e.$container;(r=document.createElement("input")).classList.add("hotbox-key-receiver"),s.appendChild(r),r.onkeyup=t,r.onkeypress=t,r.onkeydown=t,r.onfocus=n,r.onblur=i,r.oninput=function(e){r.value=null},s.onmousedown=function(e){n(),e.preventDefault()},n(),this.handle=t,this.active=n,this.deactive=i}}},e[4]={value:function(e,t,n){var i={Shift:16,Control:17,Alt:18,CapsLock:20,BackSpace:8,Tab:9,Enter:13,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,Direction:{37:1,38:1,39:1,40:1},Delete:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190};for(var o in i)i.hasOwnProperty(o)&&(i[o.toLowerCase()]=i[o]);var r="a".charCodeAt(0);"abcdefghijklmnopqrstuvwxyz".split("").forEach((function(e){i[e]=e.charCodeAt(0)-r+65}));var a=9;do{i[a.toString()]=a+48}while(a--);n.exports=i}};var t={expose:0};e.r([t.expose])}();